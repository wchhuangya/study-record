# Java

[Toc]

## 第一章 语言概述

### 软件开发

#### 软件

**软件分类：**

1. 系统软件：各种操作系统（Windows、Linux、MacOS、鸿蒙等），主要是跟计算机硬件打交道的
2. 应用软件：影音类软件、编程软件、即时通信类软件等

**定义：**

一系列按照特定顺序组织的计算机数据和指令的集合



#### 软件开发

制作软件的过程，包括：需求阶段、设计阶段（UED、数据库、软硬件架构）、研发阶段、测试阶段、上线阶段、运行维护阶段

### 人机交互方式

1. 卡带式：早期的计算机占地面积大，计算能力弱，早期的程序员将准备好的二进制的计算机程序打在卡带上，然后将卡带插入计算机中，经过漫长的等待，计算机根据卡带上的二进制程序给出最终的结果
2. 命令行（问答式）：典型的黑底白字的界面，程序员输入一个命令，电脑根据输入的命令给出不同的反应：1. 命令输入正确，电脑给出相应的行为响应；2. 命令输入错误，电脑给出错误提示，或者无响应
3. 图形化界面：电脑将常用的命令组装成外设一键式的操作（比如鼠标、键盘等），复杂的命令可以通过简单命令的组合达到同样的效果

> 知识补充：常用的命令

### 发展历史

Java 是由 Sun 公司于 1995 年推出的一门编程语言：

* 1995 ~ 2004 年，Sun 公司先后推出了 JDK 1.2，1.3，1.4
* 2004 年，推出了 JDK 1.5，并改名为 JDK 5.0，这是一个划时代的版本，奠定了 Java 的江湖地位
* 2005 年，推出了 JDK 6.0
* JDK 7.0，8.0 是一年推出一个，9.0，10.0，11.0 更是达到了半年一个版本的速度进行推出
* Sun 公司于 2019 年 3 月份推出了 JDK 最新的版本 12.0

### 与其它语言的对比

* Java 真的不难学
  * 学习简单（相比 C、C++）
  * 面向对象（不支持多继续）
  * 程序健壮（强类型的语言，异常处理机制健全）
  * 程序安全（内存管理机制）
* Java 真的很强大
  * 全世界程序员使用最多的一门语言
  * 具有完备的生态圏
  * 拥有世界范围影响力的框架
  * 语言性能比较高效

### 运行机制

> Java 程序可以跨平台使用

1. 解释型语言：JavaScript，一边读取程序，一边对程序里的内容逐行进行解释，效率比较低，有错误不容易在编码时发现
2. 编译型语言：Java，需要一个解释器来将程序源码编译为电脑可以运行的可执行文件
   1. 写代码源文件
   2. 使用 JavaC.exe 将源文件编译为相应的 class　文件（字节码文件）
   3. 使用 Java.exe 工具解释这个字节码文件，生成直接可以运行的二进制文件，交给 CPU 运行

### JVM

Java Virtual Machine，Java 虚拟机，目的是为了解析 Java 语言

> 它是 Java 语言跨平台的关键

### JDK 和 JRE

* JRE -- Java Runtime Environment，Java 运行时环境，主要包含了 Java 运行时的必要元素（如：JVM 运行时需要的支持）
* JDK -- Java Development Kits，Java 开发工具包，有 Sun 公司免费提供的 Java 开发的工具，是一种 SDK，Software Development Kits，软件开发工具包

> JDK 与 KRE 之间相互依赖，缺一不可

### Java 开发环境安装

1. 获取安装包
2. 安装 Java 开发环境
3. 配置 Java 环境变量

## 第二章 数据类型与运算符

### HelloWorld

```java
class Hello {
    public static void main(String[] args) {
        System.out.println("Hello World！");
    }
}
```

这一段代码要注意的点：

* 目前我们所接触到的代码都是写在类 class 中的
* 类名与文件名称相同
* 文件后缀是：`.java`
* main 方法的写法是固定写法
* 语句后面用分号结尾
* 注意代码的缩进和必要的空格，这样可以让代码保持良好的阅读性

编译&运行代码：

* 使用 `> javac Hello.java` 命令将刚刚写的源代码编译为相应的字节码
* 使用 `> java Hello` 命令将上一步生成的字节码文件生成可执行的二进行文件并运行
* 在控制台上，你将看到 `> Hello World!` 的输出内容

### IntelliJ IDEA

使用 `IDEA` 编写 `HelloWorld` ：

* 从 [官网]() 下载 `IntelliJ IDEA`，注意：只下载 `2020.2.3` 这一版本，主要是为了后面的破解
* 点击安装
* 打开 `IDEA` ，选择 `Create Project` ，在 `New Project` 界面的左侧，选择 `Java` ，确保右边的 `Project SDK` 是电脑上已经安装好的 `JDK 1.8`
* 创建项目名称，指定项目存放的位置

#### 快捷键

* 单行注释： <kbd>command</kbd> + <kbd>/</kbd>
* 多行注释：<kbd>ctrl</kbd> + <kbd>shift</kbd> + <kbd>/</kbd>

### 标识符

代码中使用的一些名字，例如：

* 变量名
* 方法名
* 接口名
* 类名
* ……

#### 命名规范

* 标识符可以使用的字符范围：a～z，A～Z，0-9，_
* 标识符必须以英文字母开头
* 标识符严格区分大小写
* 标识符需要做到：见名知义
* 标识符需要用到驼峰命名法：
  
  * 大驼峰：所有单词的首字母都要大写；一般适用于 class 类名
  * 小驼峰：首字母小写，之后的每一个单词的首字母大写；一般适用于变量名、方法名
* 已经被 `Java` 或者系统占有的标识符不能使用，关键字和保留字不能使用
  
  > 例如 HelloWorld 程序中，变颜色的单词都不能使用

### 基本数据类型

| 整形  | 占据内存空间大小 |       数据范围        |
| :---: | :--------------: | :-------------------: |
| byte  |  1字节（8bit）   |      $-127~128$       |
| short |  2字节（16bit）  |   $ -32767～32768 $   |
|  int  |  4字节（32bit）  | $ -2^{31}～2^{31}-1 $ |
| long  |  8字节（64bit）  | $ -2^{63}～2^{63}-1 $ |

| 浮点型 | 占据内存空间大小 |       数据范围       |
| :----: | :--------------: | :------------------: |
| float  |  4字节（32bit）  | $ \pm3.4 * 10^{38} $ |
| double |  8字节（64bit）  |     $ 10^{308} $     |

| 字符型 | 占据内存空间大小 |   数据范围   |
| :----: | :--------------: | :----------: |
|  char  |  2字节（16bit）  | 可以保存中文 |

| 布尔类型 | 占据内存空间大小 |  数据范围   |
| :------: | :--------------: | :---------: |
| boolean  |    视情况而定    | true  false |

### 变量

变量是计算机内存中的一块存储空间，是存储数据的基本单元

格式：`数据类型 变量名 = 初始化数据;` 

> 变量名里面保存的数据，可以在程序的运行过程中发生改变

数据类型：约束当前变量是什么类型

变量名：方便操作变量的名字

= 赋值号：把赋值号右侧的数据赋值给左侧变量名

初始化数据：给变量赋值相应数据类型的值

```java
class Demo1 {
    public static void main(String[] args) {
        // 定义一个 int 类型的变量
        int nums = 100;
        System.out.println(nums);
    }
}
```

### 数据类型转换

主要是为了满足数据类型一致化的问题，在不同数据类型之间做数据的转换操作的一种方式。

#### 自动类型转换

核心思想就是小数据类型转换为大数据类型。

算数运算的规则：

1. 两个操作数有一个是 double，计算结果提升为 double
2. 两个操作数没有 double，但是有一个 `float`，计算结果提升为 `float`
3. 如果操作数中没有 `float`，有一个为 `long`，计算结果提升为 `long`
4. ……
5. 你看出来什么规律了吗？

> 1. 如果操作数中只有 short 或者 byte，那么最终的结果会被提升为 int
> 2. 任何类型与 String 类型相加时（+），实际为拼接，其结果自动提升为 String

```java
byte num1 = 10;
int num2 = 20;

num2 = num1 + num2;
// 问：最终，num2 是什么数据类型，为什么？
```

#### 强制类型转换

核心思想就是将大数据类型转换为小数据类型

```java
float num1 = 3.14F;
int num2 = 10;

num2 = num1 + num2; // 这里会有编译报错

// 正确的写法是：
num2 = (int) (num1 + num2);

// 问：最终 num2 是什么数据类型，值为多少？
```

* 利：可以满足数据类型的一致性要求
* 弊：原数据类型的强制转换过程中，会导致数据精度丢失，而且这样的丢失是不可逆的

### 运算符

#### 赋值运算符

`=` ：把左边的值赋值给右边的变量

#### 复合赋值运算符

`+=  -=  *=  /=  %=`

#### 算术运算符

`+、-、*、/、%、()` ：加、减、乘、除，求余 

规则：

* 从左到右
* 先乘除，后加减
* 除数不能为0
* 有括号先处理括号里的内容

`%` 针对的是两个整数，获得的结果是不能整除后的余数，如果可以整除，结果为 0 

```java
class Demo {
    public static void main(String[] args) {
        int num1 = 10;
        int num2 = 20;

        num1 = num1 + num2; // num1 = ? num2 = ?
        num1 = num1 - num2; // num1 = ? num2 = ?
        num1 = num1 * num2; // num1 = ? num2 = ?
        num1 = num1 / num2; // num1 = ? num2 = ?
        num1 = num1 % num2; // num1 = ? num2 = ?
    }
}
```

`+=、-=、*=、/=、%=` ：这些是复合运算符，作用是简化书写

```java
int num1 = 1, num2 = 2;

num1 += num2; // => num1 = num1 + num2
```

##### 自增、自减

> 1. 该运算符很好用，但是容易引起阅读者的理解困难，或者引起初学者的困惑，小心使用
> 2. 这两个都是 一元运算符

`++` 、`--` ：

* 放在变量之后，首先执行当前语句，然后再执行自增、自减操作
* 放在变量之前，首先执行自增、自减操作，然后再执行当前语句

```java
int num1 = 1, num2 = 2;
System.out.println(num1++ + ++num2); // 最后结果是什么？为什么？
// 现在 n1 和 n2 的值又变成了什么
System.out.println(num1);
System.out.println(num2);
```

#### 比较运算符

`>  >=  <  <=  !=  ==`    这是 Java 中的写法

$>$   $ \geq $    $ < $    $ \leq $     $ \neq $      $ = $    这是数学中的表示法

关系运算符的结果是 **布尔值**

```java
System.out.println(4 > 3); // 结果是？
System.out.println(5 < 4); // 结果是？
System.out.println(3 >= 3); // 结果是？
System.out.println(6 != 8); // 结果是？
System.out.println(9 == 9); // 结果是？
```

#### 位运算符

`& | ^ ～ << >> >>>`  ：

* 按位与：同1为1，不同为0
* 按位或：有1为1，无1为0
* 按位异或：相同为0，不同为1
* 按位非：0变1，1变0（单目运算符）
* 左移：向左移动X位（在右边补X个0，单目运算符）
* 右移：向右移动X位（在左边补X个0，单目运算符）
* 无符号右移：不管符号位，其余与右移一样

#### 逻辑运算符

`&&` ：逻辑与，同真为真，有假为假

`||` ：逻辑或，有真即真，同假为假

`!` ：取反

```java
System.out.println(4 > 3 && 5 > 4);
System.out.println(4 > 3 || 5 > 6);
System.out.println(!(false));
```

##### 逻辑与的断路原则

```java
int num1 = 1, num2 = 2;
boolean res = num1 > 3 && num2++ > 10;

System.out.println(num1); // 结果？
System.out.println(num2); // 结果？
```

##### 逻辑或断路原则

```java
int num1 = 1, num2 = 2;
boolean res = num1 > 0 || num2++ > 10;

System.out.println(num1); // 结果？
System.out.println(num2); // 结果？
```

#### 三元运算符

`? : ` ：将判断后的结果赋值给变量

```java
boolean res = 3 > 5 ? false : true;
```

### 控制台输入

程序运行以后，在控制台输入一定的数据，然后程序继续运行

1. 导入工具包：`import 包名.类名`
2. 声明变量： `Scanner scanner = new Scanner(System.in);`
3. 使用 `Scanner` 中的方法

```java
import java.util.Scanner

class HaHa {
    public static void main(String[] argss) {
        Scanner scanner = new Scanner(System.in);
        System.out.println("请输入内容：");
        int num = scanner.nextInt();
        System.out.println("你输入的内容是：" + num);
    }
}
```

> Scanner 的三个常用方法：
>
> * nextInt()
> * nextDouble()
> * next()

## 第三章 选择结构与分支结构


### 选择结构 If


根据已知条件进行逻辑判断，满足条件后执行相应判断


```java
if (布尔表达式) {
    // 代码块
} else if (布尔表达式) {
    // 代码块
} 
...
else {
	//代码块
}

```


> 1. 以上代码块相互排斥，有一个为 true，其他均不再执行，适用于区间判断

> 2. 嵌套语法正确的情况下，if 语句可以任意嵌套


### 分支结构 switch


对变量或者表达式进行判断，根据判断的结果选择相应的分支


```java
switch (变量 | 表达式) {
        case 值1：
            // 代码1;
          	break;
        case 值2：
            // 代码2;
          	break;
        case 值n：
            // 代码n;
          	break;
        default:
            // 未满足上述条件时的逻辑运算;
    				break;
}
```

特点：

1. 变量可以是：`byte、short、int、char、String（jdk 7+）` 数据类型
2. 变量与值的数据类型必须一致
3. `case` 的位置与结果无关
4. 如果不写 `break` ，会按照顺序把符合条件的 `case` 语句及底下所有没有 `break` 的 case 都执行完
5. `default` ：当所写的 `case` 都不成立时执行，有且只能有一个或者没有

随堂练习：

用户在控制台输入成绩，使用 `if` 和 `switch` 两种方式实现，当用户输入的成绩 [90, 100] 时，打印出 `A` ，当成绩为 [60, 90)，成绩为 `B`，当成绩为 [0, 60) 时，成绩为 `C`


> 一定要养成良好的习惯，在每个 case 分支中尽可能把 break 都写上，否则会引发问题


### 循环结构


#### while


```java
while (布尔表达式) {
    // 逻辑代码
}
```


执行流程：


1. 先对布尔表达式进行判断，结果为 `true` 时，才执行逻辑代码

2. 本次执行完成后，会对布尔表达式进行再次判断，判断结果为 `true` 时，再执行逻辑代码

3. 直到布尔表达式的结果为 `false` 时，就会退出循环结构


特点：


* 先判断，再执行：首次判断条件不满足时，一次循环内容都不会执行


#### 循环的主要构成


1. 初始部分：用于判断的变量

2. 循环条件：决定是否继续循环的依据

3. 循环内容：循环的单次执行的代码内容

4. 迭代部分：控制循环变量的改变

#### do while


```java
do {
    // 逻辑代码
} while (布尔表达式)
```


执行流程：


1. 先无条件的执行一次逻辑代码，然后进行条件判断

2. 当结果为 `true`，则再次执行循环体内容

3. 当结果为 `false`，结束循环，执行后续代码


特点：


1. 没有入口条件，先执行，后判断

#### while 与 do while 的比较

```java
Scanner input = new Scanner(System.in);
System.out.println("请输入成绩：");

float score = input.nextFloat();
float sum = 0;
int nums = 0;

while (score != -100.0) {
  sum += score;
  nums++;
  System.out.println("请输入成绩：");
  score = input.nextFloat();
}

System.out.println("一共输入了 " + nums + " 个学生的成绩，平均分为：" + (sum / nums));
// =================================================================================
Scanner input = new Scanner(System.in);

float sum = 0;
int nums = 0;
float score;
do {
  System.out.println("请输入成绩：");

  score = input.nextFloat();
  if (score == -100)
    break;

  sum += score;
  nums++;
} while (true);

System.out.println("一共输入了 " + nums + " 个学生的成绩，平均分为：" + (sum / nums));
```

#### for


```java
for (初始部分；循环条件；迭代部分) {
    // 逻辑代码
}

```


执行流程：


1. 执行初始部分（只有一次）

2. 对循环条件进行判断，如果为 `true`，则执行逻辑代码

3. 逻辑代码执行完成后，进行迭代部分

4. 迭代完成后，再次进行循环条件的判断，如果为 `true`，继续执行逻辑代码

5. 循环条件判断的结果为 `false`，退出循环结构


特点：


1. 先判断，再执行

2. 适用于次数明确的循环


### 流程控制语句


#### break


作用：终止、跳出 `switch`、循环语句


#### continue


作用：结束本次循环，进入下次循环


### 嵌套循环

在一个完整的循环结构中，嵌套另外一个完整的循环结构

```java
/*
 *	打印 99 乘法口诀表
 *	1. 两层循环各控制的内容不一样
 *	2. 注意：println 和 print 的用法
 *	3. \t 是转义字符，代表制表符（Tab）
*/
for (int i = 1; i < 10; i++) { // 行数

  for (int j = 1; j < i + 1; j++) { // 每一行有几个式子

    System.out.print(j + "*" + i + " = " + j * i);
    System.out.print("\t\t");

  }

  System.out.println();

}
```